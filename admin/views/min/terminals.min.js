"use strict";var _=require("underscore"),Backbone=require("backbone"),$=require("jquery");Backbone.$=require("jquery");var _tpl;module.exports=Backbone.View.extend({el:"<li />",constructor:function(e){Backbone.View.apply(this,arguments),this.model=e,_tpl||(_tpl=$("#tpl-list-terminals").remove().text())},events:{"click a":"showTerminal"},render:function(){var e=this.model.get("bank");return this.$el.html(_tpl).find(".details").find(".left").find("img").attr("src",e&&e.icon?"/images/banks/"+e.icon:"images/banks/unknown.png").attr("alt",e&&e.name?e.name:"Inconnu").end().find(".name").css("color","#"+(e&&e.color?e.color:"333")).text(e&&e.name?e.name:"Inconnu").end().find("address").css("color","#"+(e&&e.color?e.color:"333")).text(this.model.get("address")).end().end().find(".right").find(".distance").css("color","#"+(e&&e.color?e.color:"333")).text(1e3*parseFloat(this.model.get("distance"))+"m").end().end(),this},showTerminal:function(e){e.preventDefault(),window.app.router.navigate("terminals/details/"+this.model.get("id"),{trigger:!0})}});