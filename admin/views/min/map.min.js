"use strict";var _=require("underscore"),Backbone=require("backbone"),$=require("jquery");Backbone.$=require("jquery");var _tpl,TerminalElementView=require("./terminals");module.exports=Backbone.View.extend({el:"<section />",constructor:function(e){Backbone.View.apply(this,arguments),this.collection=e,console.log("AdminMapView:init()"),_tpl||(_tpl=$("#tpl-list").remove().text())},events:{"click #show":"showList","click #hide":"hideList"},render:function(){return this.$el.html(_tpl),this.create(),this},create:function(){this.collection.each(function(e){var t=e,i=(t.get("bank"),t.get("latitude")),o=t.get("longitude");new google.maps.Marker({position:new google.maps.LatLng(i,o),map:n})});var e=new google.maps.LatLng(50.8459195,4.3648563),t={zoom:10,zoomControl:!0,scrollwheel:!1,center:e,mapTypeId:google.maps.MapTypeId.ROADMAP},n=new google.maps.Map(document.getElementById("gmap"),t)},showList:function(){this.$el.html(_tpl).find("#show").attr("class","hidden").end().find("#hide").attr("class","shown").end().find("ul").attr("class","shown").end();var e=this.$el.find("ul");this.collection.each(function(t){new TerminalElementView(t).render().$el.appendTo(e)})},hideList:function(){this.$el.html(_tpl).find("#show").attr("class","shown").end().find("#hide").attr("class","hidden").end().find("ul").attr("class","hidden").end()}});